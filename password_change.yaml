---
- name: Password change and push ssh key
  hosts: all
  become: True
  become_user: root
  
  vars:
    script_src: ./password_change.sh

  tasks:

    - name: Copy custom script to remote host
      ansible.builtin.copy:
        src: "{{ script_src }}"
        dest: /tmp/script.sh
        mode: "0755"

    - name: Execute script on remote host
      ansible.builtin.command:
        cmd: /tmp/script.sh
